import glob, os, math, time
from decimal import *
import numpy as np
np.random.seed(0)

import matplotlib.pyplot as plt

######## INTERVENTIONS
### Saving based on NLL 
ensemble_preds = np.array([19.76003, 19.571033, 12.125517, 23.078472, 19.34019, 14.236501, 19.651865, 19.705332, 18.831812, 18.828154, 19.721909, 19.701374, 19.729279, 19.560772, 19.917545, 19.68107, 19.563038, 21.08012, 14.409856, 10.760031, 20.14383])
true_values = np.array([13.0, 30.0, 13.0, 29.0, 28.0, 14.0, 13.0, 30.0, 27.0, 16.0, 17.0, 29.0, 29.0, 18.0, 16.0, 28.0, 28.0, 27.0, 19.0, 11.0, 20.0])
ensemble_pred_probs = np.array([0.066326015, 0.065911815, 0.06148366, 0.042929165, 0.065179266, 0.060637724, 0.065800585, 0.065442175, 0.061963398, 0.06668946, 0.066085055, 0.06551437, 0.06595322, 0.06576934, 0.06449749, 0.065160036, 0.065194026, 0.0670268, 0.063569225, 0.05844211, 0.06631085])
ensemble_pred_log_probs = np.array([-2.7131732, -2.7194376, -2.7889838, -3.1482038, -2.730614, -2.802838, -2.7211266, -2.7265882, -2.7812114, -2.7077084, -2.7168126, -2.7254858, -2.7188096, -2.7216015, -2.741129, -2.7309089, -2.7303874, -2.7026627, -2.7556257, -2.8397186, -2.7134018])
ensemble_true_probs = np.array([0.035269603, 0.014937744, 0.0609278, 0.035041716, 0.023956835, 0.060598556, 0.036044985, 0.015725188, 0.027709449, 0.059637886, 0.059697706, 0.020417081, 0.020378025, 0.06362778, 0.052776035, 0.025887204, 0.025201399, 0.040873066, 0.048649736, 0.058406003, 0.0662919])
ensemble_true_log_probs = np.array([-3.3447337, -4.203864, -2.7980657, -3.351216, -3.7315016, -2.8034842, -3.3229876, -4.1524916, -3.5859818, -2.8194642, -2.8184617, -3.8913834, -3.8932981, -2.7547052, -2.941698, -3.6540065, -3.6808558, -3.197284, -3.023109, -2.8403366, -2.7136877])
ensemble_val_stddev = [6.014869, 6.0526686, 6.4885907, 9.293036, 6.1206937, 6.5791106, 6.0628977, 6.096103, 6.438353, 5.98209, 6.036801, 6.0893865, 6.048868, 6.0657787, 6.185391, 6.1224985, 6.1193075, 5.9519815, 6.2757125, 6.826281, 6.016244]

## Saving based on MSE trial corresponding
ensemble_preds = np.array([22.592852, 21.448545, 13.755903, 21.200565, 21.818558, 16.980942, 21.100103, 21.858631, 21.338009, 20.654617, 22.405613, 22.03941, 22.699509, 20.763569, 22.42091, 21.899014, 20.974804, 23.174145, 18.628778, 13.399005, 22.443352])
true_values = np.array([13.0, 30.0, 13.0, 29.0, 28.0, 14.0, 13.0, 30.0, 27.0, 16.0, 17.0, 29.0, 29.0, 18.0, 16.0, 28.0, 28.0, 27.0, 19.0, 11.0, 20.0])
ensemble_pred_probs = np.array([0.072088696, 0.06901411, 0.057687514, 0.049116496, 0.07044083, 0.058882434, 0.06556543, 0.06890955, 0.06741659, 0.06461476, 0.0683273, 0.07146095, 0.071731985, 0.064823486, 0.07066407, 0.07044751, 0.066841185, 0.070181645, 0.061926093, 0.058086783, 0.06581957])
ensemble_pred_log_probs = np.array([-2.629858, -2.6734443, -2.8527145, -3.0135603, -2.6529822, -2.8322124, -2.7247066, -2.6749606, -2.6968641, -2.7393124, -2.683446, -2.6386042, -2.6348186, -2.7360873, -2.649818, -2.6528873, -2.7054358, -2.6566684, -2.7818136, -2.845817, -2.720838])
ensemble_true_probs = np.array([0.016046936, 0.02310591, 0.057343923, 0.03097447, 0.038827963, 0.05345036, 0.027030142, 0.025636235, 0.042655136, 0.048631467, 0.044510845, 0.032847222, 0.037759904, 0.05860652, 0.037009742, 0.0394301, 0.033435013, 0.055957597, 0.061823376, 0.054649115, 0.06068312])
ensemble_true_log_probs = np.array([-4.1322374, -3.7676668, -2.8586884, -3.474592, -3.2486145, -2.9290018, -3.6108027, -3.6637485, -3.1546075, -3.0234845, -3.1120224, -3.415888, -3.2765074, -2.8369093, -3.296574, -3.2332258, -3.3981516, -2.883161, -2.7834737, -2.9068222, -2.8020897])
ensemble_val_stddev = [5.5340466, 5.78059, 6.915573, 8.122369, 5.6635103, 6.775235, 6.084644, 5.789363, 5.9175677, 6.174166, 5.838695, 5.582661, 5.5615673, 6.154287, 5.6456165, 5.6629715, 5.9685097, 5.6844244, 6.4422317, 6.8680387, 6.0611506]

## Saving based on NLL trial corresponding
ensemble_preds = np.array([20.616007, 19.600424, 10.735434, 21.446451, 19.725674, 14.596051, 19.96127, 20.137886, 19.324179, 19.700907, 20.536327, 19.73283, 20.796623, 19.806614, 20.817057, 19.880224, 19.711012, 21.82233, 15.805769, 9.782767, 21.161045])
true_values = np.array([13.0, 30.0, 13.0, 29.0, 28.0, 14.0, 13.0, 30.0, 27.0, 16.0, 17.0, 29.0, 29.0, 18.0, 16.0, 28.0, 28.0, 27.0, 19.0, 11.0, 20.0])
ensemble_pred_probs = np.array([0.06906843, 0.0659168, 0.065581284, 0.050202683, 0.067133784, 0.060209822, 0.067367435, 0.06739496, 0.06124644, 0.067405015, 0.06526125, 0.06686394, 0.069153674, 0.06641848, 0.066905, 0.06775928, 0.06610119, 0.06889305, 0.06594086, 0.06415004, 0.06942292])
ensemble_pred_log_probs = np.array([-2.6726575, -2.719362, -2.724465, -2.9916868, -2.701068, -2.8099198, -2.6975935, -2.697185, -2.7928495, -2.6970358, -2.7293568, -2.7050955, -2.6714242, -2.71178, -2.7044816, -2.691794, -2.7165685, -2.6752, -2.718997, -2.7465305, -2.6675382])
ensemble_true_probs = np.array([0.028956924, 0.015060833, 0.061190933, 0.03195443, 0.025464876, 0.05996669, 0.033758868, 0.016822433, 0.03058724, 0.05543536, 0.055205997, 0.020014066, 0.025161054, 0.06348108, 0.048277386, 0.026179379, 0.025740284, 0.046192765, 0.057361946, 0.06293291, 0.06802033])
ensemble_true_log_probs = np.array([-3.541946, -4.1956577, -2.7937562, -3.4434445, -3.6704552, -2.813966, -3.3885121, -4.085042, -3.4871724, -2.8925376, -2.8966837, -3.91132, -3.682458, -2.7570133, -3.030792, -3.6427832, -3.659698, -3.074932, -2.858374, -2.765686, -2.6879487])
ensemble_val_stddev = [5.776043, 6.05221, 6.0831733, 7.946634, 5.9424963, 6.6258683, 5.9218855, 5.919468, 6.513721, 5.918584, 6.113003, 5.9664793, 5.768924, 6.006497, 5.962816, 5.88764, 6.035327, 5.790749, 6.0500007, 6.218893, 5.746549]
ensemble_val_entropy = [3.1726575, 3.219362, 3.224465, 3.4916868, 3.201068, 3.3099198, 3.1975935, 3.197185, 3.2928495, 3.1970358, 3.2293568, 3.2050955, 3.1714242, 3.21178, 3.2044816, 3.191794, 3.2165685, 3.1752, 3.218997, 3.2465305, 3.1675382]

######## PAUSE
## Saving based on MSE trial corresponding
ensemble_preds = np.array([21.616798, 24.174332, 18.98918, 21.84357, 20.832342, 20.858896, 20.450039, 24.057964, 22.62692, 20.135294, 20.676428, 22.87759, 23.930386, 16.87083, 16.557745, 24.42737, 15.996732, 19.67284, 23.995039, 18.820564, 23.356327])
true_values = np.array([13.0, 30.0, 13.0, 29.0, 28.0, 14.0, 13.0, 30.0, 27.0, 16.0, 17.0, 29.0, 29.0, 18.0, 16.0, 28.0, 28.0, 27.0, 19.0, 11.0, 20.0])
ensemble_pred_probs = np.array([0.07034701, 0.08211146, 0.0631613, 0.07270612, 0.06814593, 0.06623952, 0.0658004, 0.0812626, 0.073609255, 0.06539595, 0.066728935, 0.07789926, 0.08046252, 0.05912496, 0.05737434, 0.08405996, 0.056407627, 0.06403576, 0.08137893, 0.062155575, 0.076432906])
ensemble_pred_log_probs = np.array([-2.654315, -2.4996777, -2.7620635, -2.6213298, -2.6861038, -2.714478, -2.7211294, -2.5100694, -2.6089845, -2.727295, -2.7071166, -2.5523388, -2.5199637, -2.828102, -2.858158, -2.476225, -2.875151, -2.7483137, -2.5086389, -2.7781148, -2.571342])
ensemble_true_probs = np.array([0.022178035, 0.04001324, 0.04029119, 0.031059535, 0.03220525, 0.034632865, 0.030928105, 0.039063774, 0.053156585, 0.051972028, 0.055233277, 0.038123064, 0.04770567, 0.058302827, 0.057190064, 0.06331945, 0.013361788, 0.03206687, 0.048424967, 0.02958682, 0.062157188])
ensemble_true_log_probs = np.array([-3.8086529, -3.218545, -3.2116225, -3.4718494, -3.4356258, -3.3629522, -3.47609, -3.2425597, -2.9345133, -2.9570496, -2.8961897, -3.2669358, -3.042705, -2.8421047, -2.861375, -2.7595627, -4.3153563, -3.4399319, -3.0277398, -3.5204263, -2.7780888])
ensemble_val_stddev = [5.6710625, 4.858546, 6.3162456, 5.4870534, 5.8542347, 6.022723, 6.0629153, 4.909297, 5.41973, 6.100412, 5.978551, 5.121259, 4.958113, 6.7474427, 6.9533224, 4.745925, 7.072489, 6.2299924, 4.90228, 6.418448, 5.21951]
ensemble_val_entropy = [3.154315, 2.9996777, 3.2620635, 3.1213298, 3.1861038, 3.214478, 3.2211294, 3.0100694, 3.1089845, 3.227295, 3.2071166, 3.0523388, 3.0199637, 3.328102, 3.358158, 2.976225, 3.375151, 3.2483137, 3.0086389, 3.2781148, 3.071342]

## Saving based on NLL trial corresponding
ensemble_preds = np.array([18.871563, 22.313894, 17.594662, 19.27821, 18.941639, 17.775421, 16.955332, 23.247786, 19.615765, 17.452942, 20.282528, 17.729937, 23.173899, 15.870738, 14.435493, 23.208704, 13.7378645, 18.334694, 22.118391, 17.127201, 21.125875])
true_values = np.array([13.0, 30.0, 13.0, 29.0, 28.0, 14.0, 13.0, 30.0, 27.0, 16.0, 17.0, 29.0, 29.0, 18.0, 16.0, 28.0, 28.0, 27.0, 19.0, 11.0, 20.0])
ensemble_pred_probs = np.array([0.06288631, 0.06786773, 0.061907552, 0.062092416, 0.061777655, 0.06022646, 0.0617975, 0.07368669, 0.06282872, 0.06150272, 0.06462115, 0.06103071, 0.07354723, 0.0596322, 0.054885406, 0.07384463, 0.050932363, 0.063670434, 0.07125341, 0.06237674, 0.065827325])
ensemble_pred_log_probs = np.array([-2.7664268, -2.6901946, -2.782113, -2.7791314, -2.7842135, -2.8096435, -2.7838924, -2.607933, -2.767343, -2.7886739, -2.7392135, -2.7963781, -2.6098275, -2.8195596, -2.9025078, -2.605792, -2.9772568, -2.754035, -2.6415126, -2.7745628, -2.7207203])
ensemble_true_probs = np.array([0.040976852, 0.02886738, 0.04801246, 0.019763768, 0.023097632, 0.051197246, 0.051221825, 0.033855688, 0.031951174, 0.059979044, 0.05610278, 0.013805975, 0.041310225, 0.056687105, 0.05362864, 0.04983367, 0.009706503, 0.024469377, 0.061016172, 0.039420698, 0.06470115])
ensemble_true_log_probs = np.array([-3.194748, -3.545043, -3.0362947, -3.923905, -3.7680252, -2.9720695, -2.9715896, -3.3856483, -3.4435463, -2.81376, -2.88057, -4.282654, -3.1866453, -2.8702085, -2.925672, -2.9990644, -4.634959, -3.7103329, -2.7966163, -3.2334642, -2.7379763])
ensemble_val_stddev = [6.3438654, 5.8782325, 6.444162, 6.424975, 6.4577107, 6.6240373, 6.455638, 5.4140344, 6.3496814, 6.4865794, 6.173556, 6.5367475, 5.4243, 6.690049, 7.268641, 5.4024553, 7.832786, 6.2657394, 5.5989223, 6.3956895, 6.060436]
ensemble_val_entropy = [3.2664268, 3.1901946, 3.282113, 3.2791314, 3.2842135, 3.3096435, 3.2838924, 3.107933, 3.267343, 3.2886739, 3.2392135, 3.2963781, 3.1098275, 3.3195596, 3.4025078, 3.105792, 3.4772568, 3.254035, 3.1415126, 3.2745628, 3.2207203]


errors = np.absolute(ensemble_preds - true_values)
plt.subplot(3, 2, 1)
plt.scatter(ensemble_pred_probs, errors)
plt.title('Absolute errors vs Ensemble pred probs')

plt.subplot(3, 2, 2)
plt.scatter(ensemble_pred_log_probs, errors)
plt.title('Absolute errors vs Ensemble pred log probs')

plt.subplot(3, 2, 3)
plt.scatter(ensemble_true_probs, errors)
plt.title('Absolute errors vs Ensemble True probs')

plt.subplot(3, 2, 4)
plt.scatter(ensemble_true_log_probs, errors)
plt.title('Absolute errors vs Ensemble True log probs')

plt.subplot(3, 2, 5)
plt.scatter(ensemble_val_stddev, errors)
plt.title('Absolute errors vs Ensemble val Std Dev')

plt.subplot(3, 2, 6)
plt.scatter(ensemble_val_entropy, errors)
plt.title('Absolute errors vs Ensemble val Entropy')
plt.show()